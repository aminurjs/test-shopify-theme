<div class="trending-products py-8">
  <h2 class="text-center text-xl font-bold mb-4">{{ section.settings.slider_title }}</h2>
  <div class="owl-carousel owl-theme">
    {% for product in section.settings.products %}
      <div class="product-card bg-white border border-gray-200 rounded-lg p-4 shadow hover:shadow-lg transition duration-300">
        <div class="relative">
          <a href="{{ product.url }}">
            <img
              src="{{ product.featured_image | image_url: width:300, height:300 }}"
              alt="{{ product.title }}"
              class="rounded-lg w-full h-48 object-cover"
              width="200px"
              height="200px"
            >
          </a>
          {% if product.compare_at_price > product.price %}
            <span class="absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded">
              {{
                product.compare_at_price
                | minus: product.price
                | divided_by: product.compare_at_price
                | times: 100.0
                | round
              -}}
              %
            </span>
          {% endif %}
        </div>
        <div class="text-center mt-4">
          <h3 class="text-lg font-semibold truncate">
            <a href="{{ product.url }}">{{ product.title }}</a>
          </h3>
          {% if product.compare_at_price > product.price %}
            <p class="text-gray-500 line-through">{{ product.compare_at_price | money }}</p>
          {% endif %}
          <p class="text-green-600 font-bold">{{ product.price | money }}</p>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
<script>
  $(document).ready(function () {
    $('.owl-carousel').owlCarousel({
      loop: true,
      margin: 20,
      nav: true,
      dots: false,
      autoplay: true,
      autoplayTimeout: 5000,
      responsive: {
        0: {
          items: 1,
        },
        640: {
          items: 2,
        },
        1024: {
          items: 4,
        },
      },
      navText: [
        "<button class='text-green-600 bg-gray-200 rounded-full px-3 py-1'><</button>",
        "<button class='text-green-600 bg-gray-200 rounded-full px-3 py-1'>></button>",
      ],
    });
  });
</script>
{% schema %}
{
  "name": "Product Slider",
  "settings": [
    {
      "type": "text",
      "id": "slider_title",
      "label": "Slider Title",
      "default": "Trending Products"
    },
    {
      "type": "product_list",
      "id": "products",
      "label": "Select Products",
      "limit": 10
    }
  ],
  "presets": [
    {
      "name": "Product Slider"
    }
  ]
}
{% endschema %}
